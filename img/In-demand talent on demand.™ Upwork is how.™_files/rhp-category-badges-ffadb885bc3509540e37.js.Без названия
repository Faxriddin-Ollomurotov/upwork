(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1124:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));const o=(e,t)=>'\n  {\n    visitor {\n      i18n(\n        countryName: "'.concat(e,'"\n        visitorId: "').concat(t,'"\n      ) {\n        countrySupported\n        location {\n          country {\n            id\n            name\n            coord {\n              latitude\n              longitude\n            }\n            recordId\n            region\n            twoLetterAbbreviation\n            threeLetterAbbreviation\n            region\n          }\n        }\n        status\n        locationViewType\n        userPreferredLocationType\n        settingsFlags {\n          showDomesticLocationFilterOnFLSearch\n          showJobSearch\n          showPhoneVerification\n          showSmfToUpdateAddress\n          showMessageContainer\n          showLocationPreferenceOnJobPost\n          defaultDomesticEnabled\n          jobSearchDefaultedToON\n          showLocationVerificationOnFWH\n          domesticEnabledForFreelancersOnFLSearch\n          #showPersonalAddressAutocomplete\n        }\n      }\n    }\n  }\n');class n{constructor(e,t,r,o){var n;this.$httpGql=void 0,this.domesticVisitorSettings=void 0,this.visitorId=void 0,this.logger=void 0,this.$httpGql=e,this.$cache=r,this.$logger=o,this.visitorId=null===(n=t.state.visitor)||void 0===n?void 0:n.id}async getDomesticVisitorSettings(e){if(void 0!==this.domesticVisitorSettings)return this.domesticVisitorSettings;const t="usMarketDataSource_domesticVisitorSettings_".concat(e);try{const{data:data,errors:r}=await this.$cache.get(t,async()=>this.$httpGql({handleApiErrors:!0}).post({query:o(e,this.visitorId)}).json());if(!r)return this.domesticVisitorSettings=data.visitor.i18n,this.domesticVisitorSettings;await this.$cache.delete(t)}catch(e){this.$logger.error("[VS] GetI18nSettingsForVisitorQuery error: ",e)}return this.domesticVisitorSettings={countrySupported:null,location:null,status:null,locationViewType:null,settingsFlags:null,userPreferredLocationType:null},this.domesticVisitorSettings}}n.STATUS_ELIGIBLE="1";class l{constructor(e,t,r,o,l){this.locationsService=void 0,this.usMarketDataSourceService=void 0,this.isDomesticAvailableProp=void 0,this.settings=void 0,this.locationsService=e,this.usMarketDataSourceService=new n(t,r,o,l)}async isDomesticAvailable(){if(void 0!==this.isDomesticAvailableProp)return this.isDomesticAvailableProp;const e=await this.getSettings();return this.isDomesticAvailableProp=e.status===n.STATUS_ELIGIBLE,this.isDomesticAvailableProp}async getSettings(){return void 0===this.settings&&(this.settings=this.usMarketDataSourceService.getDomesticVisitorSettings(await this.locationsService.getCountryName())),this.settings}}},1440:function(e,t,r){"use strict";r(826)},1441:function(e,t,r){(t=r(4)(!1)).push([e.i,".flex-1{flex:1}.flex-none{flex:none}.flex-column{flex-direction:column}.align-items-center{align-items:center!important}.center-block{display:block;margin-left:auto;margin-right:auto}.justify-content-center{justify-content:center!important}.instant-signup-google-sso-button .google-sso-icon{border-radius:var(--btn-radius)}.up-modal-ee-search{padding:0}@media (min-width:768px){.up-modal-ee-search{background:var(--gray-6)}}.up-modal-ee-search>.up-modal-dialog{--modal-width:100%!important;margin:0!important}@media (max-width:1199px){.up-modal-ee-search .nav-header-wrapper{border-bottom:none!important}}.up-modal-ee-search .up-modal-body{padding-top:0;padding-bottom:0}@media (max-width:767px){.up-modal-ee-search .ee-search-container,.up-modal-ee-search .ee-search-content,.up-modal-ee-search .up-card,.up-modal-ee-search .up-loader-container{min-height:calc(100vh - 55px)}}@media (min-width:768px){.up-modal-ee-search .ee-search-container{min-height:calc(100vh - 105px)}}@media (min-width:992px){.up-modal-ee-search .ee-search-container{min-height:calc(100vh - 70px)}}@media (max-width:767px){.up-modal-ee-search .ee-search-container{width:100%}}.up-modal-ee-search .ee-search-container .up-loader-overlay{background-color:transparent}.up-modal-ee-search .up-progress{border-radius:3px;overflow:hidden}.up-modal-ee-search .up-progress .up-progress-bar{background:var(--brand-primary-light)}.up-modal-ee-search .up-progress .up-progress-bar .up-progress-bar-complete{background:var(--brand-primary)}.up-modal-ee-search .up-btn-primary[disabled]{transition:none}.up-modal-ee-search .ee-search-job-steps .main-job-section{min-height:300px}.up-modal-ee-search .ee-search-job-steps .bar{width:100px}.up-modal-ee-search .ee-search-job-steps .edit-shifted button{margin-top:15px}.up-modal-ee-search .ee-search-job-steps button.up-btn-circle{min-width:30px}.up-modal-ee-search .ee-search-job-steps button.flex-none{flex:none!important}.up-modal-ee-search .ee-search-job-steps .description{display:table}.up-modal-ee-search .ee-search-job-steps .up-attachment-block{border-bottom:none!important}.up-modal-ee-search .ee-search-job-steps .note{display:table;font-weight:400}.up-modal-ee-search .ee-search-job-steps .width-xs{width:135px!important;min-width:135px!important}.up-modal-ee-search .ee-search-job-steps .up-skill-badge.active{background-color:var(--brand-dusk);color:var(--white)}.up-modal-ee-search .ee-search-job-steps .warning{background:#fffdda}.up-modal-ee-search .ee-search-job-steps .fixed-price-budget,.up-modal-ee-search .ee-search-job-steps .manual-budget{margin-left:25px}@media (max-width:767px){.up-modal-ee-search .ee-search-job-steps .manual-budget{margin-left:0}}@media (min-width:768px){.up-modal-ee-search .ee-search-job-steps .up-modal-desktop-container .up-dropdown-menu-container{position:fixed;min-width:690px}}.up-modal-ee-search .ee-search-job-steps div.countdown{float:right}@media (min-width:768px){.up-modal-ee-search .ee-search-job-steps div.countdown.shrink{margin-bottom:-25px}}.up-modal-ee-search .ee-search-job-steps .lottie{width:290px}.up-modal-ee-search .ee-search-job-steps .lottie-desktop{margin-top:74px}.up-modal-ee-search .ee-search-job-steps .lottie-mobile{margin-top:56px}.up-modal-ee-search .ee-search-job-steps .congrats-text{margin-top:-34px;margin-bottom:149px}.up-modal-ee-search .ee-search-job-steps .search-skills{max-width:465px}@media (max-width:767px){.up-modal-ee-search .ee-search-job-steps .search-skills .up-input-group-clear .up-input{padding-right:19px}}.up-modal-ee-search .fs-14{font-size:14px;line-height:20px}@media (max-width:767px){.up-modal-ee-search .fs-14{font-size:13px}}.up-modal-ee-search .up-form-group{word-break:break-word}",""]),e.exports=t},613:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));r(7);var o=r(614),n=r.n(o),l=r(616),c=r.n(l);class h{constructor(e,t,r){this.$http=void 0,this.$cache=void 0,this.$logger=void 0,this.profileRequestCanceller=void 0,this.$http=e,this.$cache=t,this.$logger=r}async getPpcLandingPageProfiles(e){try{const t=e.fullPath.replace(e.path,""),r="adquiro_ppc_landing_profiles".concat(t.replace(/[\s\W-]+/g,"_"));return await this.$cache.get("".concat(r),async()=>this.$http({handleApiErrors:!0}).url("/i/api/nuxt/ppc-landing/profiles/").query(e.query).get().json())}catch(e){return{status:404,data:{}}}}async getPpcLandingPageData(e){try{const t=e.fullPath.replace(e.path,""),r="adquiro_ppc_landing_page".concat(t.replace(/[\s\W-]+/g,"_"));return await this.$cache.get("".concat(r),async()=>this.$http({handleApiErrors:!0}).url("/i/api/nuxt/ppc-landing/").query(e.query).get().json())}catch(e){return{status:404,data:{}}}}async getProfiles({isSupply:e=!1,isMain:t=!0,query:r="",skillSlug:o=null,attributeUid:l=null,occupationUid:h=null,profileTitle:d=null,rate:m={},useRequestCanceller:v=!1}){v&&this.profileRequestCanceller&&this.profileRequestCanceller.abort(),this.profileRequestCanceller=v?new AbortController:null;const S=n()({...m,isSupply:e,isMain:t,query:r,skillSlug:o,profileTitle:d,attributeId:l,occupationId:l?null:h},c.a);try{const e=this.generateCacheKey("adquiro_profiles_",S),{data:data,errors:t}=await this.$cache.get(e,async()=>this.$http({handleApiErrors:!1,cache:{strategy:"cacheAndNetwork"}}).signal(this.profileRequestCanceller||new AbortController).url("/i/api/nuxt/profiles/").query(S).get().onAbort(()=>({})).json());if(!t&&data)return data;await this.$cache.delete(e)}catch(e){this.$logger.error("[VS][EES] API getProfiles error:",e)}return this.profileRequestCanceller=null,{profiles:[],total:0,profilesLastUpdated:null}}async getMerchProfiles({attributeUid:e=null,searchModifier:t=null,profileTitle:r=null,pldSkills:o=null,occupations:l=null}){const d={profiles:[],total:0,profilesLastUpdated:null},m=n()({location:h.MERCH_HIRE_LOCATION,attributeUid:e,profileTitle:r,qt:t,...o?{pldSkills:o}:{occupations:l}},c.a);if(this.$logger.log("[VS][EES] API getMerchProfiles params: ".concat(JSON.stringify(m))),!o&&!l)return this.$logger.error("[VS][EES] API getMerchProfiles invalid params passed"),d;try{const e=this.generateCacheKey("adquiro_merch_profiles_",m),{data:data,errors:t}=await this.$cache.get(e,async()=>this.$http({handleApiErrors:!0}).url("/i/api/nuxt/merch-profiles/").query(m).get().json());if(!t&&data)return data;await this.$cache.delete(e)}catch(e){this.$logger.error("[VS][EES] API getMerchProfiles error: ".concat(e.message),e)}return d}async getCategoriesByService(e){const t="adquiro_categories_by_service_".concat(e);try{return await this.$cache.get(t,async()=>this.$http({handleApiErrors:!0}).url("/i/api/nuxt/job-post/services/".concat(e,"/categories/")).get().json())}catch(e){this.$logger.error("[VS] API getCategoriesByService error:",e),await this.$cache.delete(t)}return[]}async getClearlyRatedData(){try{return await this.$cache.get("adquiro_clearly_rated",async()=>this.$http({handleApiErrors:!0}).url("/i/api/upwork-clearly-rated/").get().json())}catch(e){this.$logger.error("[VS] API getClearlyRatedData error:",e),await this.$cache.delete("adquiro_clearly_rated")}return{}}async getJobsCountData(){const e="adquiro_jobs_count";try{const{data:data,errors:t}=await this.$cache.get(e,async()=>this.$http({handleApiErrors:!0}).url("/i/api/nuxt/jobs-count/").get().json());if(!t&&data)return data;await this.$cache.delete(e)}catch(t){this.$logger.error("[VS] API getJobsCountData error:",t),await this.$cache.delete(e)}return{jobs:{total:105640}}}generateCacheKey(e,t){return"".concat(e).concat(Object.entries(t).map(([e,t])=>"".concat(e,":").concat(t)).join("_"))}}h.MERCH_HIRE_LOCATION="hire"},740:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));r(7);const o=e=>'\n  {\n    ontologyEntities(ids: ["'.concat(e.join(","),'"]) {\n      ...\n      on OntologyEntity {\n        ontologyId\n      }\n    }\n  }\n'),n=12;class l{constructor(data={}){this.servicesMaxCount=data.servicesMaxCount||n,this.store=data.store,this.httpGql=data.httpGql,this.logger=data.logger}async getEEData(e=!0){let t;const r={query:"\n  {\n    ontologyCategories {\n      id\n      preferredLabel\n      subcategories {\n        id\n        preferredLabel\n        services {\n          id\n          preferredLabel\n        }\n      }\n    }\n  }\n"};try{const{data:data}=await this.httpGql({handleApiErrors:!0}).post(r).json();t=e?this.transformCategoryTiles(data.ontologyCategories):data.ontologyCategories}catch(e){this.logger.error("getEEData-err: ",e)}return t||[]}async getOntologyEntitiesByIds(e){if(0===e.length)return[];const t={query:o(e)};try{var r;const{data:data}=await this.httpGql({handleApiErrors:!0}).post(t).json();if(null!==(r=data.ontologyEntities)&&void 0!==r&&r.length)return data.ontologyEntities}catch(e){this.logger.error("getOntologyEntitiesByIds-err: ",e)}return[]}transformCategoryTiles(data){return data.map(e=>{const t=[];for(let i=0;i<e.subcategories.length;i++){const r=e.subcategories[i];if(1===r.services.length){const o=r.services[0];e.subcategories[i]=this.getL2AsL3(r,o),t[o.id]=this.getL3AsL1Child(r,o)}else for(const e in r.services){const o=r.services[e];t[o.id]=this.getL3AsL1Child(r,o)}}return Object.keys(t).length<=this.servicesMaxCount?this.getL1WithL3s(e,Object.values(t)):e})}getL2AsL3(e,t){return{id:e.id,idl3:t.id,preferredLabel:t.preferredLabel}}getL3AsL1Child(e,t){return{id:t.id,idl2:e.id,preferredLabel:t.preferredLabel}}getL1WithL3s(e,t){return{id:e.id,preferredLabel:e.preferredLabel,services:t}}}},826:function(e,t,r){var content=r(1441);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(5).default)("01e56e1f",content,!0,{sourceMap:!1,manualInject:!0})},860:function(e,t,r){"use strict";r(7);var o=r(825),n=r.n(o),l=r(274),c=r(636),h=r(861),d=r(1567),m=r(620),v=r.n(m),S={name:"EeSearchHeader",components:{standard:r(111).a},props:{eventSublocation:{type:String,required:!0},eventLabel:{type:String,required:!0}}},f=r(0),x=Object(f.a)(S,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"nav-v2 nav-visitor top-nav-visitor-ia mb-0"},[r("div",{staticClass:"nav-wrapper"},[r("div",{staticClass:"container"},[r("div",{staticClass:"nav-header-wrapper"},[r("div",{staticClass:"nav-header nav-d-flex align-items-center"},[r("div",{directives:[{name:"track-click",rawName:"v-track-click",value:{sublocation:e.eventSublocation,label:e.eventLabel},expression:"{ sublocation: eventSublocation, label: eventLabel }"}],staticClass:"vs-navbar-brand vs-cursor-pointer",attrs:{"data-qa":"logo"},on:{click:function(t){return e.$emit("click-logo")}}},[r("standard")],1)])])])])])}),[],!1,null,null,null).exports,y=r(613),w=r(740);const j={Freelancers:"professionals",Professionals:"professionals",Developers:"developers",Specialists:"specialists",Writers:"writers",Designers:"designers",Animators:"animators",Modelers:"modelers"},k={EeSearchWelcome:()=>r.e(52).then(r.bind(null,1593)),EeSearchCandidates:()=>r.e(51).then(r.bind(null,1597)),Lottie:()=>Promise.all([r.e(8),r.e(70)]).then(r.bind(null,1678)),UpJpExpertise:()=>Promise.all([r.e(2),r.e(21),r.e(67)]).then(r.bind(null,1589)),UpJpComplexity:()=>r.e(66).then(r.bind(null,1591)),UpJpBudget:()=>Promise.all([r.e(2),r.e(129),r.e(65)]).then(r.bind(null,1588)),UpJpLocation:()=>Promise.all([r.e(2),r.e(6),r.e(68)]).then(r.bind(null,1592)),UpJpReview:()=>Promise.all([r.e(2),r.e(7),r.e(130),r.e(69)]).then(r.bind(null,1585)),SignUpModal:()=>Promise.all([r.e(2),r.e(8),r.e(6),r.e(7),r.e(121)]).then(r.bind(null,1682)),UpCProgressBar:()=>r.e(140).then(r.bind(null,1121)),UpCIcon:()=>r.e(4).then(r.bind(null,276))};var C={name:"EeSearchModal",components:{...k,EeSearchHeader:x,UpCLoader:d.a,UpCModalContainer:c.a,UpCFullscreen:h.default},injectStyles:[v.a],inheritAttrs:!1,props:{restoreScreenKey:{type:String,required:!0},search:{type:Object,required:!0},isDomestic:{type:Boolean,required:!0},countryName:{type:String,default:null},occupationTalentTitleFallback:{type:String,default:"experts"},jpCardClass:{type:String,default:"up-card d-flex flex-column p-0 my-0 mx-md-0 top-level-card"},jpAvatarsCount:{type:Number,default:5},eventLabels:{type:Object,default:()=>({back:"back_cta",next:"next_cta",logo:"upwork_logo",impression:"saw_step"})}},data(){const e={expertise:{id:"expertise",title:"Let's talk skills",subtitle:"Narrow down who is likely to see and send a proposal for your job.",nextLabel:"Next: Project Size",isNextDisabled:!this.search.attributeUid},complexity:{id:"complexity",title:"Your project size",subtitle:"",nextLabel:this.isDomestic?"Next: Location":"Next: Budget",isNextDisabled:!0},location:{id:"location",title:"Set your location preferences",subtitle:"Increase proposals from talent in a specific region",nextLabel:"Next: Budget",isNextDisabled:!0},budget:{id:"budget",title:"Set your budget",subtitle:"Don’t worry! You’re not committing to anything final.",nextLabel:"Continue",isNextDisabled:!1},review:{id:"review",title:"Post your job to get proposals",subtitle:"In-demand professionals are more likely to send proposals for projects with clear names and descriptions.",nextLabel:"Post Your Job",isNextDisabled:!0}},t=Object.keys(e).filter(e=>!!this.isDomestic||"location"!==e);return{jpSteps:e,jpStepsIds:t,jpStepId:"expertise",totalJpSteps:t.length-1,adquiroApi:new y.a(this.$http,this.$cache,this.$logger),mq:l.a.data(),isLoading:!0,isWelcomeScreen:!1,isSuccessScreen:!1,isTalentLoading:!1,isRegistrationSuccess:!1,isRegistrationInProgress:!1,isJobPostingInProgress:!1,shouldIgnoreBeforeunload:!1,regAnimation:null,jpAnimation:null,prevSearchParams:{},talentCount:0,skillsWithoutProfiles:[],profiles:[],recruitersLinkQuery:"",occupationTalentTitle:""}},computed:{isDesktop(){return this.mq.size>=this.mq.sizes.md},stepId(){return this.isWelcomeScreen?"welcome":this.jpStepId},eventSublocation(){return"ee_search_".concat(this.stepId)},isExpertiseScreen(){return"expertise"===this.jpStep.id},isComplexityScreen(){return"complexity"===this.jpStep.id},isLocationScreen(){return"location"===this.jpStep.id},isBudgetScreen(){return"budget"===this.jpStep.id},isReviewScreen(){return"review"===this.jpStep.id},isTalentExperience(){return!!this.search.attributeUid},jpStep(){return this.jpSteps[this.jpStepId]},jpStepIndex(){return this.jpStepsIds.indexOf(this.jpStepId)},currentJpStep(){return this.jpStepIndex+1},stepsIndicatorText(){return"".concat(this.currentJpStep,"/").concat(this.totalJpSteps)},profileSkillData(){return{slug:this.search.skillSlug,prettyName:this.isTalentExperience?this.search.attributeLabel:null}},talentTitle(){if(this.isTalentExperience){const e=this.search.label;return e.split(" ").length>1?e.replace(new RegExp(Object.keys(j).join("|"),"g"),e=>j[e]):e}return this.occupationTalentTitle},recruitersLink(){return"/staffing/hire/role-group".concat(this.recruitersLinkQuery)},talentAvatars(){return this.profiles.slice(0,this.jpAvatarsCount).map(e=>e.portrait)},eventLogData(){return{isDomestic:this.isDomestic}},isNextDisabled(){return this.jpStep.isNextDisabled},isSaveJobDraftCtaAvailable(){return this.isReviewScreen&&!this.isJobPostingInProgress},isJobPostingCtaDisabled(){return"review"!==this.jpStepId&&this.isNextDisabled||this.isJobPostingInProgress},lottieClass(){return this.isDesktop?"lottie-desktop":"lottie-mobile"},impressionData(){return{event:"impression",sublocation:this.eventSublocation,label:this.eventLabels.impression,data:this.eventLogData}},shouldShowBackButton(){return this.isExpertiseScreen?this.talentCount:!this.isReviewScreen}},beforeMount(){l.a.install(this)},methods:{async open(){var e;if(!this.isLoading)return this.$refs.modal.open(),this.onModalScreenChange(),void this.$tracker.track(this.impressionData);this.$refs.modal?this.$refs.modal.open():this.$nextTick(()=>{this.$refs.modal.open()});const t=this.$store.getters["job/opening/ontologySkillUids"](),o=this.search[this.restoreScreenKey],n=o&&-1!==this.jpStepsIds.indexOf(o),l=new w.a({store:this.$store,httpGql:this.$httpGql,logger:this.$logger}),[[c],[h],d]=await Promise.all([this.search.occupationUid?this.adquiroApi.getCategoriesByService(this.search.occupationUid):Promise.resolve([{}]),this.search.occupationOntologyId?Promise.resolve([]):l.getOntologyEntitiesByIds(this.search.occupationUid?[this.search.occupationUid]:[]),this.isTalentExperience?Promise.resolve({}):r.e(98).then(r.t.bind(null,1581,3)),Object.values(k).map(e=>e())]),m={profiles:[],total:0};let v=m,S=m;if(!this.search.occupationOntologyId&&h.ontologyId&&(this.search.occupationOntologyId=h.ontologyId),!c)return this.$refs.modal.close(),void this.$logger.error("[EESearch] Categories not found for L3 UID ".concat(this.search.occupationUid));(this.isTalentExperience||!this.isTalentExperience&&this.search.occupationOntologyId)&&([v,S]=await Promise.all([this.adquiroApi.getMerchProfiles({...this.search,attributeUid:this.search.attributeUid||null,pldSkills:this.isTalentExperience?null:"".concat(this.search.occupationOntologyId,"|1.0"),searchModifier:this.search.searchModifier||this.search.label}),this.isTalentExperience?this.adquiroApi.getProfiles(this.getDefaultSearchParams({skills:t,useRequestCanceller:!1})):Promise.resolve(m)]),v.total||this.$logger.warn("[EESearch][Talent] Supply talent not found:",{...this.search,attributeUid:this.search.attributeUid||null,pldSkills:this.isTalentExperience?null:this.search.occupationOntologyId,searchModifier:this.search.searchModifier||this.search.label}),this.isTalentExperience||S.total||this.$logger.warn("[EESearch][Talent] Default talent not found:",this.getDefaultSearchParams({skills:t,useRequestCanceller:!1}))),this.talentCount=v.total||S.total,this.profiles=null!==(e=v.profiles)&&void 0!==e&&e.length?v.profiles:S.profiles,this.profiles.length||(this.isWelcomeScreen=!1,this.$logger.error("[EESearch][Talent] No talents found for:",this.search)),this.isTalentExperience&&(this.$store.getters["job/opening/hasSkill"](this.search.attributeUid)||this.$store.commit("job/opening/setAdditionalSkills",[{skillUid:this.search.attributeUid}])),this.updateRecruitersLink(c.categoryOntologyId),this.$store.commit("job/opening/setGroupUid",c.categoryUid),this.$store.commit("job/opening/setCategoryUid",c.subcategoryUid),this.$store.commit("job/opening/setOccupationUid",this.search.occupationUid),this.jpSteps.complexity.subtitle="Find ".concat(this.talentTitle," with the right availability."),this.$store.commit("job/opening/setTitle",this.isTalentExperience?this.search.profileTitle:this.search.label),this.$store.commit("job/opening/setOccupationName",this.talentTitle),this.isTalentExperience||(this.occupationTalentTitle=d[this.search.occupationOntologyId]||this.occupationTalentTitleFallback),n&&(this.isWelcomeScreen=!1,this.jpStepId=o,this.onModalScreenChange()),this.isLoading=!1,this.$tracker.track(this.impressionData)},close(){this.isReviewScreen?this.goHome():(this.$refs.modal.close(),this.trackClick("close"))},reset(){this.isLoading=!0,this.isWelcomeScreen=!0,this.jpStepId="expertise",this.$store.dispatch("job/opening/resetStorage"),this.$store.dispatch("job/expertise/reset")},back(){this.trackClick(this.eventLabels.back);const e=this.jpStepIndex-1,t=this.jpStepsIds[e];t?this.jpStepId=t:this.isWelcomeScreen=!0,this.onModalScreenChange()},next(){if(this.isReviewScreen)this.publishJob();else{if(this.trackClick(this.eventLabels.next),this.isWelcomeScreen)this.isWelcomeScreen=!1,this.jpStepId="expertise";else{const e=this.jpStepIndex+1,t=this.jpStepsIds[e];if(!t||this.jpStep.isNextDisabled)return;if("review"===t){if(!this.isRegistrationSuccess)return this.openSignUpModal(),void r.e(80).then(r.t.bind(null,1582,3)).then(e=>{this.regAnimation=e.default});this.$store.dispatch("job/opening/cleanStorage"),this.$store.dispatch("job/examples/loadQuestionsExamples",this.$store.state.job.opening.groupUid),this.$store.dispatch("job/qualifications/loadValues"),this.$store.dispatch("job/opening/save"),r.e(64).then(r.t.bind(null,1583,3)).then(e=>{this.jpAnimation=e.default}),window.addEventListener("beforeunload",e=>{this.shouldIgnoreBeforeunload||(e.preventDefault(),e.returnValue="Are you sure? You haven't completed your job post yet.")})}this.jpStepId=t}this.onModalScreenChange(),this.$tracker.track(this.impressionData)}},async updateTalent(){if(this.isWelcomeScreen)return;const e=this.$store.getters["job/opening/ontologySkillUids"]();if(e.length&&this.skillsWithoutProfiles.length&&this.skillsWithoutProfiles.every(t=>e.includes(t)))return;const t=this.$store.getters["job/opening/isUsOnly"](),r=this.$store.getters["job/opening/hourlyRate"](),o=this.getDefaultSearchParams({skills:e,rate:r,isUsOnly:t});if(n()(this.prevSearchParams,o))return;this.prevSearchParams=o,this.isTalentLoading=!0;const{profiles:l,total:c}=await this.adquiroApi.getProfiles(o);c?(this.profiles=l,this.talentCount=c,this.skillsWithoutProfiles=[]):this.isExpertiseScreen&&(this.skillsWithoutProfiles=e),this.isTalentLoading=!1},async saveJobDraft(){this.trackClick("save_draft"),this.isJobPostingInProgress=!0,await this.$store.dispatch("job/opening/save"),this.shouldIgnoreBeforeunload=!0,this.goHome()},async publishJob(){this.trackClick("post_job");if(this.$refs.review.isValid()){this.isJobPostingInProgress=!0;try{await this.$store.dispatch("job/opening/publish"),this.isSuccessScreen=!0}catch(e){this.$logger.error("[EESearch] Job posting error: ".concat(e.message),e),this.isJobPostingInProgress=!1}}},onLogoClick(){"review"!==this.jpStep.id?this.$emit("modal-dismiss"):this.goHome()},onJobPublishedComplete(){const{redirectUrl:e}=this.$store.state.job.opening;e&&(this.shouldIgnoreBeforeunload=!0,window.location.href=e)},onModalScreenChange(){this.$emit("modal-screen",{screen:this.isWelcomeScreen?null:this.jpStepId})},setJpStepIsNextDisabled({stepId:e,value:t}){e&&this.jpSteps[e]&&(this.jpSteps[e].isNextDisabled=t,e!==this.jpStep.id||t||(this.$nextTick(this.updateTalent),this.$store.dispatch("job/opening/updateStorage")))},updateRecruitersLink(e){switch(e){case"upworkOccupation:webmobileandsoftwaredev":this.recruitersLinkQuery="?rg=developer";break;case"upworkOccupation:salesandmarketing":this.recruitersLinkQuery="?rg=marketer";break;case"upworkOccupation:designandcreative":this.recruitersLinkQuery="?rg=creative";break;default:this.recruitersLinkQuery=""}},getDefaultSearchParams({skills:e=[],rate:t={},isUsOnly:r=!1,useRequestCanceller:o=!0}){const n=!e.length&&this.search.attributeUid?[this.search.attributeUid]:e,l=n.length?"(attribute_uids:".concat(n.join(" AND attribute_uids:"),")"):"";let c="",h="";if(!this.isWelcomeScreen&&"expertise"!==this.stepId&&l){const e=this.$store.getters["job/opening/contractorTier"]();h=null!==e?" AND predicted_tier:".concat(e):""}return h&&r&&(c=' AND country_cs:"United States"'),{...this.search,rate:t,isMain:!(n.length||!this.search.occupationUid),isSupply:!1,attributeUid:null,occupationUid:n.length?null:this.search.occupationUid,query:"".concat(l).concat(h).concat(c),useRequestCanceller:o}},openSignUpModal(){this.$refs.signupModal&&Object.hasOwnProperty.call(this.$refs.signupModal,"open")?this.$refs.signupModal.open():this.$nextTick(()=>{this.openSignUpModal()})},onRegistrationSuccess(){this.isRegistrationSuccess=!0,this.isRegistrationInProgress=!1,this.next(),this.$emit("on-registration-success")},onRegistrationSubmit(){this.isRegistrationInProgress=!0},goHome(){window.location.href="/home"},trackClick(label){this.$tracker.track({event:"click",sublocation:this.eventSublocation,label:label,data:this.eventLogData})}}},L=(r(1440),Object(f.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("UpCModalContainer",{ref:"modal",attrs:{"modal-title":"","modal-name":"ee-search"}},[r("div",{staticClass:"ee-search-body",class:[e.isDesktop?"":"up-modal-ee-search"],attrs:{"data-qa":"ee-search-modal"}},[r("EeSearchHeader",{attrs:{"event-sublocation":e.eventSublocation,"event-label":e.eventLabels.logo},on:{"click-logo":e.onLogoClick}}),e._v(" "),r("div",{staticClass:"ee-search-container container-visitor py-0 py-md-30"},[e.isLoading?r("UpCLoader",{attrs:{loading:e.isLoading}}):r("div",{staticClass:"ee-search-content up-modal-content vs-bg-white"},[e.isWelcomeScreen?r("EeSearchWelcome",{attrs:{profiles:e.profiles,"talent-title":e.talentTitle,"talent-count":e.talentCount,"recruiters-link":e.recruitersLink,"skill-data":e.profileSkillData,"event-sublocation":e.eventSublocation,"is-desktop":e.isDesktop},on:{"click-start":e.next}}):e._e(),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.isWelcomeScreen,expression:"!isWelcomeScreen"}],staticClass:"ee-search-job-steps"},[r("div",{class:e.jpCardClass},[e.isSuccessScreen?[r("div",{staticClass:"center-block lottie",class:e.lottieClass},[e.jpAnimation?r("Lottie",{attrs:{"animation-data":e.jpAnimation,loop:!1},on:{complete:e.onJobPublishedComplete}}):e._e()],1),e._v(" "),r("h2",{staticClass:"center-block text-center mx-30 mx-md-0 congrats-text"},[e._v("\n                  Congratulations! Your first job post is now live.\n                ")])]:[r("header",{staticClass:"up-card-header mx-0"},[r("div",{staticClass:"d-flex"},[r("h2",{staticClass:"flex-1 mb-0",domProps:{textContent:e._s(e.jpStep.title)}}),e._v(" "),e.isReviewScreen?e._e():r("div",{staticClass:"bar d-flex align-items-center"},[r("up-c-progress-bar",{staticClass:"flex-1",attrs:{value:e.currentJpStep,max:e.totalJpSteps,"full-width":!0}}),e._v(" "),r("small",{staticClass:"pl-5 vs-color-gray-2",domProps:{textContent:e._s(e.stepsIndicatorText)}})],1)])]),e._v(" "),r("section",{staticClass:"up-card-section main-job-section flex-1 pb-0 mx-0",class:[e.isBudgetScreen?"py-0":""]},[e.isBudgetScreen||e.isReviewScreen?e._e():r("EeSearchCandidates",{attrs:{"talent-avatars":e.talentAvatars,"talent-count":e.talentCount,subtitle:e.jpStep.subtitle,"is-loading":e.isTalentLoading}}),e._v(" "),e.isReviewScreen?e._e():r("UpJpExpertise",{directives:[{name:"show",rawName:"v-show",value:e.isExpertiseScreen,expression:"isExpertiseScreen"}],attrs:{"event-sublocation":e.eventSublocation,"step-id":"expertise"},on:{"is-next-disabled":e.setJpStepIsNextDisabled}}),e._v(" "),e.isReviewScreen?e._e():r("UpJpComplexity",{directives:[{name:"show",rawName:"v-show",value:e.isComplexityScreen,expression:"isComplexityScreen"}],attrs:{"event-sublocation":e.eventSublocation,"step-id":"complexity"},on:{"is-next-disabled":e.setJpStepIsNextDisabled}}),e._v(" "),e.isDomestic&&!e.isReviewScreen?r("UpJpLocation",{directives:[{name:"show",rawName:"v-show",value:e.isLocationScreen,expression:"isLocationScreen"}],attrs:{"event-sublocation":e.eventSublocation,"step-id":"location"},on:{"is-next-disabled":e.setJpStepIsNextDisabled}}):e._e(),e._v(" "),e.isBudgetScreen&&!e.isReviewScreen?r("UpJpBudget",{attrs:{"is-domestic":e.isDomestic,"event-sublocation":e.eventSublocation,"step-id":"budget"},on:{"is-next-disabled":e.setJpStepIsNextDisabled,"update-talent":e.updateTalent}},[r("EeSearchCandidates",{attrs:{"talent-avatars":e.talentAvatars,"talent-count":e.talentCount,subtitle:e.jpStep.subtitle,"is-loading":e.isTalentLoading}})],1):e._e(),e._v(" "),e.isReviewScreen?r("UpJpReview",{ref:"review",attrs:{"event-sublocation":e.eventSublocation,"is-domestic":e.isDomestic}},[r("EeSearchCandidates",{attrs:{"talent-avatars":e.talentAvatars,"talent-count":e.talentCount,subtitle:e.jpStep.subtitle,"is-loading":e.isTalentLoading}})],1):e._e()],1),e._v(" "),r("footer",{staticClass:"up-card-footer mx-0 up-sticky-card-footer"},[r("div",{staticClass:"up-btn-row d-flex",attrs:{role:"group"}},[e.shouldShowBackButton?r("button",{staticClass:"up-btn up-btn-default mb-0 flex-none",on:{click:e.back}},[r("UpCIcon",{staticClass:"d-inline-block d-md-none mr-5",attrs:{name:"arrow-prev"}}),e._v(" "),r("span",{staticClass:"d-none d-md-inline"},[e._v("Back")])],1):e._e(),e._v(" "),r("div",{staticClass:"d-none d-md-inline flex-1"},[r("span",[e._v(" ")])]),e._v(" "),e.isSaveJobDraftCtaAvailable?r("button",{staticClass:"up-btn up-btn-link mb-0 mr-0",on:{click:e.saveJobDraft}},[r("span",{staticClass:"d-none d-md-inline"},[e._v("Save as Draft")]),e._v(" "),r("span",{staticClass:"d-inline d-md-none"},[e._v("Save Draft")])]):e._e(),e._v(" "),r("button",{staticClass:"up-btn up-btn-primary mb-0 mr-0",attrs:{disabled:e.isJobPostingCtaDisabled},on:{click:e.next}},[e.isJobPostingInProgress?r("UpCIcon",{attrs:{name:"spinner"}}):e._e(),e._v("\n                      "+e._s(e.jpStep.nextLabel)+"\n                    ")],1)])])]],2)])],1)],1)],1)]),e._v(" "),e.isLoading||e.isRegistrationSuccess?e._e():r("SignUpModal",{ref:"signupModal",attrs:{"event-sublocation":"registration_modal","client-flow-name":"client_high_potential_post_job","prefilled-country":e.countryName},on:{"registration-success":e.onRegistrationSuccess,"registration-submit":e.onRegistrationSubmit}}),e._v(" "),r("up-c-fullscreen",{attrs:{open:e.isRegistrationInProgress}},[r("div",{staticClass:"d-flex flex-1 align-items-center justify-content-center vs-height-100"},[e.regAnimation?r("lottie",{attrs:{"animation-data":e.regAnimation}}):e._e()],1)])],1)}),[],!1,null,null,null));t.a=L.exports}}]);