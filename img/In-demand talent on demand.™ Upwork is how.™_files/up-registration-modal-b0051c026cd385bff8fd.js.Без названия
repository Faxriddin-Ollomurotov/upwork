(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1382:function(e,t,n){var content=n(1383);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(5).default)("3ec89294",content,!0,{sourceMap:!1,manualInject:!0})},1383:function(e,t,n){(t=n(4)(!1)).push([e.i,".flex-1{flex:1}.up-has-error .up-btn.up-dropdown-toggle{border-color:var(--brand-danger)!important}.up-has-error .up-btn.up-dropdown-toggle:focus,.up-has-error .up-btn.up-dropdown-toggle:hover{border-color:var(--brand-danger)!important;box-shadow:none}.up-btn.up-dropdown-toggle:not(.up-btn-circle){--btn-padding-horizontal:15px;width:100%;margin:0;font-size:14px;font-weight:var(--font-weight-normal);border-radius:var(--radius-md);border:var(--border-base-alt);text-align:left}@media (min-width:768px){.up-btn.up-dropdown-toggle:not(.up-btn-circle){min-width:var(--width-sm)}}.up-btn.up-dropdown-toggle:not(.up-btn-circle):not([disabled]){background-color:var(--bg-inverse)}.up-btn.up-dropdown-toggle:not(.up-btn-circle):not([disabled]),.up-btn.up-dropdown-toggle:not(.up-btn-circle):not([disabled]):hover{color:inherit}.up-btn.up-dropdown-toggle:not(.up-btn-circle).up-btn-sm{font-size:var(--font-size-base)}.up-dropdown-icon{display:inline-flex;margin:auto 0 auto 15px}.up-dropdown-icon:not(.disabled){color:var(--primary-color-icon)}.up-dropdown-toggle-title{display:flex}",""]),e.exports=t},1384:function(e,t,n){var content=n(1385);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(5).default)("353dc457",content,!0,{sourceMap:!1,manualInject:!0})},1385:function(e,t,n){(t=n(4)(!1)).push([e.i,"@media (min-width:768px){.width-xs{width:135px!important;min-width:135px!important;max-width:none}}@media (min-width:768px){.width-md{width:300px!important;min-width:300px!important;max-width:none}}.up-dropdown{position:relative}@media (min-width:768px){.up-dropdown{display:inline-block;max-width:100%}}.up-dropdown.up-dropdown-menu-natural-width{position:static;max-width:100%}.up-dropdown.up-dropdown-menu-natural-width .up-dropdown-menu{top:auto;width:auto;max-width:100%}.up-dropdown.up-dropdown-menu-natural-width .up-menu-item-text{white-space:normal}.up-dropdown-menu-container.up-transition-intro-enter-active,.up-dropdown-menu-container.up-transition-intro-leave-active{--animation-duration:0.2s;--animation-timing-function:cubic-bezier(0.9,-0.1,0.1,1.1);--translate-x-start:0;--translate-y-start:0;--scale-y-start:0.15;position:relative;z-index:1000}.up-dropdown-menu-natural-width .up-transition-intro-enter-active,.up-dropdown-menu-natural-width .up-transition-intro-leave-active{--animation-duration:0s}.full-width{width:100%!important}",""]),e.exports=t},271:function(e,t,n){var content=n(272);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(5).default)("760fe87c",content,!0,{sourceMap:!1,manualInject:!0})},272:function(e,t,n){(t=n(4)(!1)).push([e.i,".up-btn{--btn-padding-vertical:12px;--btn-padding-horizontal:29px;--btn-padding-vertical-sm:8px;--btn-padding-horizontal-sm:15px;--btn-circle-size:40px;--btn-link-padding-horizontal:20px;--btn-primary-bg:var(--brand-primary);padding:var(--btn-padding-vertical) var(--btn-padding-horizontal);box-shadow:var(--drop-shadow);border:var(--btn-border);border-radius:var(--btn-radius);font-weight:var(--btn-weight);display:inline-block;margin:0 20px 30px 0;font-size:var(--btn-font-size);line-height:1;max-height:40px;text-align:center;vertical-align:middle;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:all .15s;cursor:pointer}.up-btn:hover{text-decoration:none}@media (hover:hover){.up-btn:active,.up-btn:hover{transition:all .3s;box-shadow:var(--drop-shadow-active)}.up-btn.active{box-shadow:var(--drop-shadow)}.up-btn.active:active,.up-btn.active:hover{box-shadow:var(--drop-shadow-active)}}.up-btn>.up-icon{vertical-align:top}.up-btn>.up-icon:not(:last-child){margin-right:10px}.up-btn-primary{color:var(--text-inverse);background-color:var(--btn-primary-bg);border-color:transparent}@media (hover:hover){.up-btn-primary.active,.up-btn-primary:active,.up-btn-primary:focus,.up-btn-primary:hover{color:var(--text-inverse);background-color:var(--brand-success)}}.up-btn-default{color:var(--brand-primary);background-color:transparent}@media (hover:hover){.up-btn-default.active,.up-btn-default:active,.up-btn-default:hover{color:var(--brand-success);background-color:var(--btn-bg-hover)}}.up-btn-default>.caret{color:var(--brand-success)}.up-btn-default.up-btn-circle{border:var(--border-base-alt)}.up-btn-circle.disabled,.up-btn-circle[disabled],.up-btn-default.disabled,.up-btn-default[disabled],.up-btn-primary.disabled,.up-btn-primary[disabled],.up-btn.active.disabled,.up-btn.active[disabled]{cursor:not-allowed;text-decoration:none;box-shadow:none;text-shadow:none;outline:0;border-color:var(--border-4);--disabled-color:var(--text-3);color:var(--disabled-color);--disabled-bg:var(--bg-4);background-color:var(--disabled-bg)}@media (forced-colors:active){.up-btn-circle.disabled,.up-btn-circle[disabled],.up-btn-default.disabled,.up-btn-default[disabled],.up-btn-primary.disabled,.up-btn-primary[disabled],.up-btn.active.disabled,.up-btn.active[disabled]{border-color:var(--border-hc-disabled);color:var(--text-hc-disabled)}}.up-btn-circle.disabled:active,.up-btn-circle[disabled]:active,.up-btn-default.disabled:active,.up-btn-default[disabled]:active,.up-btn-primary.disabled:active,.up-btn-primary[disabled]:active,.up-btn.active.disabled:active,.up-btn.active[disabled]:active{pointer-events:none}@media (forced-colors:active){.up-btn-circle.disabled,.up-btn-circle[disabled],.up-btn-default.disabled,.up-btn-default[disabled],.up-btn-primary.disabled,.up-btn-primary[disabled],.up-btn.active.disabled,.up-btn.active[disabled]{background:var(--bg-hc-button)}}.up-btn-link{padding-left:var(--btn-link-padding-horizontal);padding-right:var(--btn-link-padding-horizontal);background-color:transparent;color:var(--link-color);text-transform:none;font-weight:var(--btn-weight);line-height:var(--font-size-base);box-shadow:none!important;border-color:transparent;box-sizing:content-box}@media (hover:hover){.up-btn-link.active,.up-btn-link:active,.up-btn-link:focus,.up-btn-link:hover{color:var(--link-hover-color);text-decoration:underline}}.up-btn-link:not(.up-btn){display:inline-flex;align-items:center;padding:0;margin:0;border:0;background:transparent;cursor:pointer}.up-btn-link:not(.up-btn) .up-icon{margin-right:10px}.up-btn-link[disabled]{cursor:not-allowed;text-decoration:none;box-shadow:none;text-shadow:none;outline:0;--disabled-color:var(--text-3);color:var(--disabled-color);background-color:transparent;opacity:.65}@media (forced-colors:active){.up-btn-link[disabled]{border-color:var(--border-hc-disabled);color:var(--text-hc-disabled)}}.up-btn-link[disabled]:active{pointer-events:none}.up-btn-sm{margin:0 20px 20px 0;padding:var(--btn-padding-vertical-sm) var(--btn-padding-horizontal-sm) calc(var(--btn-padding-vertical-sm) - 1px);font-size:var(--font-size-base);font-size:var(--btn-sm-font-size,var(--font-size-base));line-height:1;max-height:30px}.up-btn-block{display:block;width:100%;margin-left:auto;margin-right:auto;padding-left:0;padding-right:0}.up-btn-block+.up-btn-block{margin-top:5px}@media (max-width:767px){.up-btn-block-sm{width:100%;margin-left:0!important;margin-right:0!important}}@media (max-width:479px){.up-btn-block-xs{width:100%;margin-left:0!important;margin-right:0!important}}.up-btn-circle{width:var(--btn-circle-size);height:var(--btn-circle-size);line-height:0;margin:0;padding:0;border-radius:50%}.up-btn-circle.up-btn-sm{--btn-circle-size:30px}.up-btn-circle:not(.up-btn-primary):not([disabled]) .up-icon{color:var(--primary-color-icon)}input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:none}",""]),e.exports=t},275:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));let r=0;function o(){return r+=1,r}},638:function(e,t,n){"use strict";n.d(t,"c",(function(){return menu})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return dialog}));var r=n(301);const o={inited:!1,listeners:{},featuresDetected:{},featureDetectionCallbacks:{},failbackAvailableFeatures:["transition-meta","page-meta","navigation-meta","sso-meta"],init(){if(this.inited)return;this.inited=!0,this.iosBridge=window.webkit&&window.webkit.messageHandlers.__IOS_BRIDGE__,this.androidBridge=window.__ANDROID_BRIDGE__;const e=window.__NATIVE_BRIDGE__&&window.__NATIVE_BRIDGE__.onMessage;window.__NATIVE_BRIDGE__||(window.__NATIVE_BRIDGE__=this.iosBridge||this.androidBridge),window.__NATIVE_BRIDGE__&&(window.__NATIVE_BRIDGE__.onMessage=data=>{e&&e(data),this.onMessage(data)})},on(e,t,n){this.init(),this.listeners[t]||(this.listeners[t]={}),this.listeners[t][e]=n},off(e,t){delete this.listeners[t][e]},postMessage(e){this.init(),this.iosBridge?this.iosBridge.postMessage(e):this.androidBridge&&this.androidBridge.postMessage(JSON.stringify(e))},onMessage(data){const{id:e}=data.payload;this.listeners[e]&&this.listeners[e][data.type]&&this.listeners[e][data.type](data.payload)},isNewerVersion(e,t){const n=e.split("."),r=t.split(".");if(!r.length||!n.length)return!1;for(let e=0;e<r.length;++e){const a=parseInt(r[e])||0,b=parseInt(n[e])||0;if(a!==b)return a>b}return!0},isFeatureDetectionFailback(){const e=/(Freelancer)/gi.test(navigator.userAgent),t=navigator.userAgent.match(/[^/]+$/)[0].replace(/\([^()]*\)/,"").trim();return Object(r.b)(navigator.userAgent)?e?!this.isNewerVersion("1.12.2",t):!this.isNewerVersion("1.9.2",t):Object(r.a)(navigator.userAgent)?e?!this.isNewerVersion("1.10.0",t):!this.isNewerVersion("1.8.0",t):void 0},onFeatureDetected(e,t){const{id:n}=e,{features:r}=e,o=r&&r.length?r:t;this.featuresDetected[n]=o,this.featureDetectionCallbacks[n]&&(this.featureDetectionCallbacks[n].forEach(e=>{e(o)}),delete this.featureDetectionCallbacks[n])},isNativeFeatureAvailable(e,t){const n="".concat(e,"-meta");return new Promise(r=>{if(this.isFeatureDetectionFailback()){const e=this.failbackAvailableFeatures.indexOf(n)>=0;r(e)}else if(void 0!==this.featuresDetected[n])t&&Array.isArray(this.featuresDetected[n])?r(!(this.featuresDetected[n].indexOf(t)<0)):r(Boolean(this.featuresDetected[n]));else{this.listeners[n]||(this.postMessage({type:"up/".concat(e,"/META"),payload:{id:n}}),this.on("up/".concat(e,"/META/events/SUCCESS"),n,e=>this.onFeatureDetected(e,!0)),this.on("up/".concat(e,"/v1/UNKNOWN"),n,e=>this.onFeatureDetected(e,!1)),this.on("up/".concat(e,"/META/events/ERROR"),n,e=>this.onFeatureDetected(e,!1)));const o=o=>{this.listeners[n]&&(this.off("up/".concat(e,"/META/events/SUCCESS"),n),this.off("up/".concat(e,"/v1/UNKNOWN"),n),this.off("up/".concat(e,"/META/events/ERROR"),n)),t&&Array.isArray(o)?r(!(o.indexOf(t)<0)):r(Boolean(o))};this.featureDetectionCallbacks[n]||(this.featureDetectionCallbacks[n]=[]),this.featureDetectionCallbacks[n].push(o)}})}};let l=0;const d={},c={};function h({id:e}){d[e]&&(d[e](),delete d[e],delete c[e])}function m(e){return function(e){const t=JSON.parse(JSON.stringify(e)),n=[];for(;t.length;){const e=t.pop();e.items&&e.items.length&&(e.items.forEach(e=>{e.groups&&t.push(...e.groups)}),n.push(...e.items))}return n}(e.groups).map(e=>{const t={};return t.id=e.id,t.isChecked=e.isChecked,t})}function y(e,t,n,r){const o=[],l=[],d=[...c[t]];for(;d.length;){const e=d.pop();Array.isArray(e[r])&&d.push(...e[r]),l.push(e)}return e.forEach(e=>{const t=l.find(t=>t[n]===e.id);t&&(t.isChecked=Boolean(e.isChecked),o.push(t))}),o}function v(e,t){return t?e.filter(e=>{let label=e.label.toLowerCase();return e.subLabel&&(label+=e.subLabel.toLowerCase()),label.indexOf(t.toLowerCase())>=0}):e}const f={bottomSheet:"BOTTOM_SHEET",dialog:"DIALOG",modal:"MODAL"};function k(e,t,n){const r=t.items&&t.items.length?t.items:[];return[{checkableBehavior:r.some(e=>Array.isArray(e[t.nestedKey]))?"none":n,id:e,items:r.map(e=>{const option={id:e[t.itemKey],label:e[t.itemText],icon:e.icon,isChecked:e.isChecked};if(t.itemSublabel&&(option.subLabel=e[t.itemSublabel]),Array.isArray(e[t.nestedKey])){const r={items:e[t.nestedKey],itemText:t.itemText,itemKey:t.itemKey,nestedKey:t.nestedKey};t.itemSublabel&&(r.itemSublabel=t.itemSublabel),option.groups=k(e[t.itemKey],r,n)}return option})}]}function w(e){return e.groups.map(t=>{const n={id:t[e.groupKey],label:t[e.groupText],checkableBehavior:t.checkableBehavior||"none",items:t[e.groupItemsKey].map(t=>{const n={id:t[e.itemKey],label:t[e.itemText],icon:t.icon,isChecked:t.isChecked};return e.itemSublabel&&(n.subLabel=t[e.itemSublabel]),n})};return t.checkableBehaviorParentId&&(n.checkableBehaviorParentId=t.checkableBehaviorParentId),n})}const menu={open(data){l+=1;const e=data.id||"sheet-id-".concat(l),t=!!data.hasFiltering&&data.hasFiltering,n=data.query?data.query:"",r=f[data.type];let x=[];if(x=Array.isArray(data.menuData.groups)?w(data.menuData):k("group-id",data.menuData,data.checkableBehavior?data.checkableBehavior:"none"),t&&o.on("up/menus/v1/".concat(r,"/EVENTS/QUERY_CHANGED"),e,e=>function(e,t,n,r){const{query:o}=e,{id:l}=e;r&&r(l,o,y(m(e),l,t,n))}(e,data.menuData.itemKey,data.menuData.nestedKey,data.filteringCallback)),o.on("up/menus/v1/".concat(r,"/EVENTS/QUERY_SUBMITTED"),e,e=>function(e,t){const{query:n}=e,{id:r}=e;t&&t(r,n)}(e,data.submitCallback)),o.on("up/menus/v1/".concat(r,"/EVENTS/DONE"),e,e=>function(e,t,n){const{id:r}=e;d[r]&&(d[r](y(m(e),r,t,n)),delete d[r],delete c[r])}(e,data.menuData.itemKey,data.menuData.nestedKey)),o.on("up/menus/v1/".concat(r,"/EVENTS/DISMISSED"),e,h),Array.isArray(data.menuData.groups)){let t=[];data.menuData.groups.forEach(e=>{Array.isArray(e[data.menuData.groupItemsKey])&&(t=t.concat(e[data.menuData.groupItemsKey]))}),c[e]=t}else c[e]=data.menuData.items;return n&&x.forEach((e,t)=>{const r=data.enableFiltering?v(e.items,n):e.items;e.items=r}),o.postMessage({type:"up/menus/v1/".concat(r,"/PUSH"),payload:{id:e,title:data.title?data.title:"",isTokenizer:!!data.isTokenizer,hasFiltering:t,query:n,queryPlaceholder:data.queryPlaceholder?data.queryPlaceholder:"",groups:x}}),new Promise(n=>{d[e]=r=>{!function(e,t,n){const r=f[e];n&&o.off("up/menus/v1/".concat(r,"/EVENTS/QUERY_CHANGED"),t),o.off("up/menus/v1/".concat(r,"/EVENTS/DONE"),t),o.off("up/menus/v1/".concat(r,"/EVENTS/DISMISSED"),t)}(data.type,e,t),Array.isArray(r)?n(r):n(null)}})},update(data){const e=f[data.type];let t=[];t=Array.isArray(data.menuData.groups)?w(data.menuData):k("group-id",data.menuData,data.checkableBehavior?data.checkableBehavior:"none");const n={id:data.id,title:data.title?data.title:"",isTokenizer:!!data.isTokenizer,hasFiltering:!!data.hasFiltering&&data.hasFiltering,query:data.query,queryPlaceholder:data.queryPlaceholder?data.queryPlaceholder:"",groups:t};if(Array.isArray(data.menuData.groups)){let e=[];data.menuData.groups.forEach(t=>{Array.isArray(t[data.menuData.groupItemsKey])&&(e=e.concat(t[data.menuData.groupItemsKey]))}),c[data.id]=e}else c[data.id]=data.menuData.items;data.isTokenizer||n.groups.forEach((e,t)=>{const n=data.enableFiltering?v(e.items,data.query):e.items;e.items=n}),o.postMessage({payload:n,type:"up/menus/v1/".concat(e,"/UPDATE")})},close(data){const e=f[data.type],t=void 0===data.isAnimated||!!data.isAnimated,n={id:data.id,isAnimated:t};o.postMessage({payload:n,type:"up/menus/v1/".concat(e,"/DISMISS")})}};let x=0;const S={};function I(e){const{id:t}=e;S[t]&&(S[t](e.actionId),delete S[t])}const dialog={open(e){x+=1;const t="dialog-id".concat(x);if(o.on("up/dialogs/v1/ALERT/EVENTS/ACTION_SELECTED",t,I),!e.message)throw new Error('required parameter "message" is missing');return o.postMessage({type:"up/dialogs/v1/ALERT",payload:{id:t,title:e.title,message:e.message,isDismissible:!1,actions:e.actions.map(e=>({id:e.id,label:e.label})).reverse()}}),new Promise(n=>{S[t]=r=>{o.off("up/dialogs/v1/ALERT/EVENTS/ACTION_SELECTED",t);let data=null;r&&(data=e.actions.find(e=>e.id===r)),n(data)}})}}},735:function(e,t,n){"use strict";n.r(t);n(7);var r=n(271),o=n.n(r),l=n(1382),d=n.n(l),c=n(16),h={injectStyles:[o.a,d.a],name:"UpCDropdownToggle",components:{UpCIconV2:c.default},props:{size:{default:"md",type:String},disabled:{default:!1,type:Boolean},open:{default:!1,type:Boolean}},data:()=>({dropdownCaretIcon:()=>n.e(31).then(n.bind(null,401))})},m=n(0),y=Object(m.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",e._g({staticClass:"up-btn up-btn-default up-dropdown-toggle",class:{"up-dropdown-toggle-open":e.open,"up-btn-sm":"sm"===e.size},attrs:{"aria-expanded":e.open?"true":"false",disabled:e.disabled,type:"button"}},e.$listeners),[n("div",{staticClass:"up-dropdown-toggle-title"},[n("span",{staticClass:"flex-1 ellipsis"},[e._t("default")],2),e._v(" "),n("up-c-icon-v2",{staticClass:"up-dropdown-icon",class:{disabled:e.disabled},attrs:{icon:e.dropdownCaretIcon,size:"sm"}})],1)])}),[],!1,null,null,null).exports,v=n(1384),f=n.n(v),k=n(74),w=n(638),x=n(275);function S(e,t){return Array.isArray(e)?e.map(e=>{const n={...e};return n._origin=e,Array.isArray(e[t])&&(n[t]=S(e[t],t)),n}):[]}var I={injectStyles:[f.a],name:"UpCDropdown",components:{upCDropdownToggle:y,upCDropdownMenu:()=>Promise.all([n.e(5),n.e(19),n.e(127)]).then(n.bind(null,1596)).then(e=>e.default||e)},model:{prop:"selected",event:"change"},props:{items:{type:Array,default:()=>[]},groups:{type:Array,default:()=>[]},checkableBehavior:{type:String,validator:e=>["single","multiple","none"].includes(e),default:"single"},multi:{type:Boolean,default:!1},title:{type:String,default:null},size:{type:String,default:"md"},width:{type:String,default:null,validator:e=>["xs","sm","md","lg","xlg"].indexOf(e)>-1},naturalWidthMenu:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},search:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},searchLabel:{type:String,default:"Search"},loading:{type:Boolean,default:!1},selected:{type:[Array,Object],default:null},itemLink:{type:String,default:""},itemKey:{type:String,default:"id"},itemText:{type:String,default:"label"},itemSublabel:{type:String,default:""},groupKey:{type:String,default:"id"},groupText:{type:String,default:"label"},groupItemsKey:{type:String,default:"items"},nestedKey:{type:String,default:"items"},disableCheckMark:{type:Boolean,default:!1},ariaLabelledby:{type:String,default:null},htmlAsText:{type:Boolean,default:!0},menuClass:{type:String,default:null}},data:()=>({isOpen:!1,isNativeApp:Object(k.a)(),openNativeMenu:null,internalSelected:[],lastSelected:[],isNativeAppOpen:!1,nativeQueryString:"",nativeAppId:"",menuItems:[],groupItems:[],isOpenedWithKeyboard:!1,id:null}),computed:{isNested(){return this.menuItems.some(e=>Array.isArray(e[this.nestedKey]))},classes(){return this.width?"width-".concat(this.width):""},checkableBehaviorType(){return this.multi?"multiple":this.checkableBehavior},dropdownToggleAriaLabelledby(){return[this.ariaLabelledby,"dropdown-label-".concat(this.id)].filter(Boolean).join(" ")}},watch:{items:{immediate:!0,handler(e,t){(t||e&&e.length)&&(this.menuItems=S(this.items,this.nestedKey),this.isNested&&e.length&&function(e,t){const n=e=>{let r=!0;for(let o=0;o<e.length;o+=1){const l=e[o];!e[0][t]&&l[t]&&(r=!1),e[0][t]&&!l[t]&&(r=!1),Array.isArray(l[t])&&(r=r&&n(l[t]))}return r};n(e)||console.error("All selectable items must be at the same depth within the menus")}(this.menuItems,this.nestedKey),e.length&&function(data){if(Array.isArray(data.items)&&data.items.length){const e=data.items.every(e=>e[data.itemText]&&"string"==typeof e[data.itemText]);data.items.every(e=>e[data.itemKey]&&"string"==typeof e[data.itemKey])?e?data.itemLink&&"multiple"===data.checkableBehavior&&console.error("Dropdown with link should not be checkable behavior multiple"):console.error("Each menu items should have ".concat(data.itemText," property and type should be string")):console.error("Each menu items should have ".concat(data.itemKey," property and type should be string"))}}({items:this.menuItems,itemKey:this.itemKey,itemText:this.itemText,itemLink:this.itemLink,checkableBehavior:this.checkableBehavior}),this.mergeNewItemsWithSelectedItemState(this.menuItems,this.internalSelected),this.isNativeAppOpen&&this.updateNativePayload())}},groups:{immediate:!0,handler(e,t){var n,r,o;(t||e&&e.length)&&(this.groupItems=(n=this.groups,r=this.groupItemsKey,o=this.nestedKey,n.map(e=>{const t={...e};return t[r]=S(e[r],o),t})),e.length&&function(data){if(Array.isArray(data.groups)&&data.groups.length){if(data.groups.every((e,i,t)=>e.checkableBehavior===t[0].checkableBehavior)){const e=!data.itemLink||data.groups.every(e=>"multiple"!==e.checkableBehavior),t=data.groups.every(e=>e[data.groupKey]&&"string"==typeof e[data.groupKey]),n=data.groups.every(e=>!Array.isArray(e[data.groupItems])||e[data.groupItems].every(e=>e[data.itemKey]&&"string"==typeof e[data.itemKey])),r=data.groups.every(e=>!Array.isArray(e[data.groupItems])||e[data.groupItems].every(e=>e[data.itemText]&&"string"==typeof e[data.itemText]));t?n?r?e||console.error("Group dropdown with link should not be checkable behavior multiple"):console.error("Each menu items should have ".concat(data.itemText," property and type should be string")):console.error("Each menu items should have ".concat(data.itemKey," property and type should be string")):console.error("Each group items should have ".concat(data.groupKey," property and type should be string"))}else console.error("Checkable behavior of each group should be same")}}({groups:this.groupItems,groupKey:this.groupKey,groupItems:this.groupItemsKey,itemKey:this.itemKey,itemText:this.itemText,itemLink:this.itemLink}))}},selected:{immediate:!0,handler(e,t){const n=Array.isArray(e)&&e.length,r=!t&&(e||n);this.setDefaultSelectedValues({shouldNotEmitChange:r})}},internalSelected:{immediate:!0,handler(e){this.groupItems.length?this.setGroupSelectedProp(this.groupItems,e):this.setSelectedProp(this.menuItems,e)}}},mounted(){this.id=Object(x.a)().toString()},methods:{async open(){if(this.isNativeApp&&null===this.openNativeMenu){let e="";this.search?e="search":this.isNested?e="nested":this.menuItems&&!this.groupItems.length?"single"===this.checkableBehaviorType?e="single-select":"multiple"===this.checkableBehaviorType&&(e="multi-select"):this.groupItems&&this.groupItems.length&&("single"===this.groupItems[0].checkableBehavior?e="single-select":"multiple"===this.groupItems[0].checkableBehavior&&(e="multi-select")),this.openNativeMenu=await w.a.isNativeFeatureAvailable("menus",e)}if(this.isOpen=!0,this.lastSelected=[...this.internalSelected],this.openNativeMenu){let e="modal";!this.isNested&&!this.search&&this.menuItems.length<6&&this.groupItems.length<=0&&(e="dialog"),this.isNativeAppOpen=!0;const t={itemKey:this.itemKey,itemText:this.itemText,nestedKey:this.nestedKey};this.itemSublabel&&(t.itemSublabel=this.itemSublabel),this.menuItems&&!this.groupItems.length?t.items=this.menuItems:this.groupItems&&this.groupItems.length&&(t.groups=this.groupItems,t.groupKey=this.groupKey,t.groupText=this.groupText,t.groupItemsKey=this.groupItemsKey);const n=await w.c.open({type:e,menuData:t,title:this.title,checkableBehavior:this.checkableBehaviorType,hasFiltering:this.search,query:"",queryPlaceholder:this.searchPlaceholder,filteringCallback:this.onNativeQueryChange,enableFiltering:!0});this.isNativeAppOpen=!1,this.nativeAppId="",this.nativeQueryString="",this.syncNativeSelection(n),this.close()}},onNativeQueryChange(e,t,n){this.nativeAppId=e,this.nativeQueryString=t;const r=this.groupItems.length&&this.groupItems.some(e=>"multiple"===e.checkableBehavior);("multiple"===this.checkableBehaviorType||r)&&this.syncNativeSelection(n),this.$nextTick(()=>{this.updateNativePayload()}),this.$emit("search",t)},updateNativePayload(){let e="modal";!this.isNested&&!this.search&&this.menuItems.length<6&&this.groupItems.length<=0&&(e="dialog");const t={itemKey:this.itemKey,itemText:this.itemText,nestedKey:this.nestedKey};this.itemSublabel&&(t.itemSublabel=this.itemSublabel),this.menuItems&&!this.groupItems.length?t.items=this.menuItems:this.groupItems&&this.groupItems.length&&(t.groups=this.groupItems,t.groupKey=this.groupKey,t.groupText=this.groupText,t.groupItemsKey=this.groupItemsKey),w.c.update({type:e,id:this.nativeAppId,query:this.nativeQueryString,queryPlaceholder:this.searchPlaceholder,menuData:t,title:this.title,checkableBehavior:this.checkableBehaviorType,hasFiltering:this.search,enableFiltering:!0})},syncNativeSelection(e){if(e&&e.length)if(this.menuItems&&!this.groupItems.length)if("multiple"===this.checkableBehaviorType){const t=[];e.forEach(e=>{const n=this.internalSelected.find(option=>option[this.itemKey]===e[this.itemKey]);(!n&&e.isChecked||n&&!e.isChecked)&&(e.isChecked=!e.isChecked,t.push(e))}),t.forEach(e=>{this.onSelect(e)})}else{const t=e.find(e=>e.isChecked);t.isChecked=!t.isChecked,this.onSelect(t)}else if(this.groupItems&&this.groupItems.length){const t=[],n=this.internalSelected.map(e=>e[this.itemKey]);e.forEach(e=>{let r=null;this.groupItems.every(o=>(Array.isArray(o[this.groupItemsKey])&&(r=o[this.groupItemsKey].find(t=>t[this.itemKey]===e[this.itemKey]),r&&("multiple"!==o.checkableBehavior&&e.isChecked&&n.indexOf(e[this.itemKey])<0||"multiple"===o.checkableBehavior&&(e.isChecked&&n.indexOf(e[this.itemKey])<0||!e.isChecked&&n.indexOf(e[this.itemKey])>=0))&&(e.isChecked=!e.isChecked,t.push({groupId:o[this.groupKey],checkableBehavior:o.checkableBehavior,item:e}))),!r))}),t.forEach(e=>{this.groupSelect(e)})}},close(e){this.isOpen=!1,this.isOpenedWithKeyboard=!1,this.lastSelected=[],e&&this.focus(),this.$emit("close")},isSelectedChanged(){let e=[];Array.isArray(this.selected)?e=this.selected.filter(e=>{if(e&&e[this.itemKey])return e}).map(e=>e[this.itemKey]):this.selected&&this.selected[this.itemKey]&&e.push(this.selected[this.itemKey]);const t=this.internalSelected.map(e=>e[this.itemKey]);return!(e.length===t.length&&e.every(e=>t.indexOf(e)>=0))},emitEvent(){if("multiple"===this.checkableBehaviorType||this.groupItems.length){const e=this.internalSelected.map(e=>e._origin);this.$emit("change",e)}else this.$emit("change",this.internalSelected.length?this.internalSelected[0]._origin:null)},setDefaultSelectedValues({shouldNotEmitChange:e}){if(this.isSelectedChanged()){if(this.groupItems.length){const e={},t=t=>{t&&this.groupItems.forEach(n=>{const r=n[this.groupItemsKey].find(option=>option[this.itemKey]===t[this.itemKey]);if(r&&"none"!==n.checkableBehavior){const t=n.checkableBehaviorParentId&&"single"===n.checkableBehavior?n.checkableBehaviorParentId:n[this.groupKey];e[t]||(e[t]=[]),"single"===n.checkableBehavior?e[t][0]={isChecked:!0,...r}:e[t].push({isChecked:!0,...r})}})};Array.isArray(this.selected)?this.selected.forEach(e=>{t(e)}):t(this.selected),this.internalSelected=[...[].concat.apply([],Object.values(e))]}else if(this.menuItems){const e=[],t=[...this.menuItems],n=[],r=t=>{if(!t)return;const r=n.find(option=>option[this.itemKey]===t[this.itemKey]);!r||r[this.nestedKey]&&r[this.nestedKey].length||(delete r[this.nestedKey],e.push({isChecked:!0,...r}))};for(;t.length;){const e=t.pop();Array.isArray(e[this.nestedKey])&&t.push(...e[this.nestedKey]),n.push({...e})}Array.isArray(this.selected)?this.selected.forEach(e=>{r(e)}):r(this.selected),"multiple"===this.checkableBehaviorType?this.internalSelected=[...e]:"single"===this.checkableBehaviorType&&e.length?this.internalSelected=[e[e.length-1]]:this.internalSelected=[]}e||this.emitEvent()}},setSelectedProp(e,t){e.forEach((n,r)=>{n.isChecked=Boolean(t.find(option=>option[this.itemKey]===n[this.itemKey])),this.$set(e,r,n),Array.isArray(n[this.nestedKey])&&this.setSelectedProp(n[this.nestedKey],t)})},setGroupSelectedProp(e,t){e.forEach(e=>{this.setSelectedProp(e[this.groupItemsKey],t)})},getSelectedLabel(){return this.internalSelected.map(option=>option[this.itemText]).join(", ")},openDropdownKeyboard(){this.isOpenedWithKeyboard=!0,this.open()},onMenuLoaded(){this.isOpenedWithKeyboard&&(this.setMenuFocus({keyCode:40}),this.isOpenedWithKeyboard=!1)},onDownPress(e){this.isOpen?this.setMenuFocus(e):this.openDropdownKeyboard()},onHomePress(e){this.isOpen&&(e.preventDefault(),this.setMenuFocus(e))},onEndPress(e){this.isOpen&&(e.preventDefault(),this.setMenuFocus(e))},setTabPress(e){e.shiftKey?this.close():this.isOpen&&(e.preventDefault(),this.setMenuFocus(e))},focus(){this.$refs.toggle.$el.focus()},setMenuFocus(e){const t=e.keyCode;this.search&&35!==t&&36!==t?this.$refs.menu.onFocusInput():this.$refs.menu.setMenuFocus(t)},onSearch(e){this.$emit("search",e)},onSelect(e,t,n,r){const o=n||this.checkableBehaviorType,l=r||this.menuItems;if(e){if(this.$emit("select",e._origin),"none"!==o){if("multiple"===o&&e.isChecked){let t=-1;return this.internalSelected.forEach((option,n)=>{option[this.itemKey]===e[this.itemKey]&&(t=n)}),t>=0&&this.internalSelected.splice(t,1),void this.emitEvent()}if("multiple"!==o){let e=-1;this.internalSelected.forEach((option,t)=>{if(this.menuItems&&!this.groupItems.length)e=0;else if(this.groupItems.length){Boolean(l.find(e=>e[this.itemKey]===option[this.itemKey]))&&(e=t)}}),e>=0&&this.internalSelected.splice(e,1)}this.internalSelected.push(e),this.emitEvent()}e.onSelect&&e.onSelect(),this.isNativeApp&&e[this.itemLink]&&(window.location=e[this.itemLink]),t&&this.focus()}},groupSelect(e,t){const n=this.groupItems.find(t=>t[this.groupKey]===e.groupId);if("single"!==n.checkableBehavior)this.onSelect(e.item,t,n.checkableBehavior,n[this.groupItemsKey]);else{let r=n[this.groupItemsKey];this.groupItems.forEach(e=>{(n.checkableBehaviorParentId&&(n.checkableBehaviorParentId===e[this.groupKey]||n.checkableBehaviorParentId===e.checkableBehaviorParentId)||n[this.groupKey]===e.checkableBehaviorParentId)&&(r=r.concat(e[this.groupItemsKey]))}),this.onSelect(e.item,t,n.checkableBehavior,r)}},onCancel(){this.internalSelected=[...this.lastSelected],this.emitEvent(),this.lastSelected=[],this.isOpen=!1},mergeNewItemsWithSelectedItemState(e,t,n){n=n||t.map(e=>e[this.itemKey]),e.map(e=>{if(Array.isArray(e[this.nestedKey]))this.mergeNewItemsWithSelectedItemState(e[this.nestedKey],t,n);else if(-1!==n.indexOf(e[this.itemKey])){e.isChecked=!0;const n=t.findIndex(t=>e[this.itemKey]===t[this.itemKey]);-1!==n&&t.splice(n,1,e)}})},filterMessage(e){this.$emit("filter-message",e)}}},K=Object(m.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"up-dropdown",class:{open:e.isOpen,"up-dropdown-menu-nested":e.isNested,"up-has-error":e.error,"up-dropdown-menu-natural-width":e.naturalWidthMenu}},[n("up-c-dropdown-toggle",{ref:"toggle",class:e.classes,attrs:{id:"dropdown-label-"+e.id,"aria-labelledby":e.dropdownToggleAriaLabelledby,disabled:e.disabled,open:e.isOpen,size:e.size},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.preventDefault(),e.openDropdownKeyboard(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.openDropdownKeyboard(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.onDownPress(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"home",void 0,t.key,void 0)?null:e.onHomePress(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"end",void 0,t.key,void 0)?null:e.onEndPress(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.setTabPress(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:(t.preventDefault(),e.close(!0))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.close(!0))}],click:e.open}},[e._t("label",[e._v("\n      "+e._s(e.internalSelected&&e.internalSelected.length?e.getSelectedLabel():e.title)+"\n    ")],{item:e.internalSelected,title:e.title})],2),e._v(" "),!e.openNativeMenu&&e.isOpen?n("up-c-dropdown-menu",{ref:"menu",attrs:{"aria-labelledby":e.ariaLabelledby,items:e.menuItems,groups:e.groupItems,title:e.title,"checkable-behavior":e.checkableBehaviorType,search:e.search,"search-placeholder":e.searchPlaceholder,"search-label":e.searchLabel,loading:e.loading,"item-key":e.itemKey,"item-link":e.itemLink,"item-text":e.itemText,"item-sublabel":e.isNested?"":e.itemSublabel,"nested-key":e.nestedKey,"group-key":e.groupKey,"group-text":e.groupText,"group-items-key":e.groupItemsKey,"is-nested":e.isNested,"disable-check-mark":e.disableCheckMark,"html-as-text":e.htmlAsText,"menu-class":e.menuClass},on:{"menu-loaded":e.onMenuLoaded,close:e.close,select:e.onSelect,groupSelect:e.groupSelect,cancel:e.onCancel,search:e.onSearch,"filter-message":e.filterMessage}}):e._e()],1)}),[],!1,null,null,null);t.default=K.exports}}]);